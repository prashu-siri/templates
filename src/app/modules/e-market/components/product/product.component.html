<app-spinner *ngIf="isLoading"></app-spinner>
<div class="page-container">
	<div class="container">
		<div class="header-container">
			<h1>{{ pageHeading }}</h1>
			<div class="search-input-wrapper">
				<input
					aria-label="Search"
					id="search-input"
					name="search"
					type="search"
					placeholder="Search"
					(keyup)="search()"
					[(ngModel)]="searchTerm"
				/>
			</div>
		</div>
		<div class="product-card-wrapper product-card-lg">
			<div *ngFor="let product of filteredProducts" class="product-card">
				<img [src]="product.imageUrl" alt="" />
				<div class="product-info">
					<h3 class="product-title">{{ product.name }}</h3>
					<span
						>{{ product.cost | currency : "INR" }} /
						{{ product.unit }}</span
					>
					<div class="quantity-container">
						<div class="quantity-wrapper">
							<a
								(click)="removeQuantity($event, product)"
								href="#"
							>
								<app-svg-icon
									[svgIconId]="'minus-sm'"
								></app-svg-icon>
							</a>
							<input
								id="quantity"
								name="quantity"
								[(ngModel)]="product.quantity"
								type="text"
								aria-label="Quantity"
							/>
							<a (click)="addQuantity($event, product)" href="#">
								<app-svg-icon
									[svgIconId]="'plus-sm'"
								></app-svg-icon>
							</a>
						</div>

						<button
							(click)="addToCart(product)"
							class="btn btn-primary"
						>
							<app-svg-icon [svgIconId]="'cart'"></app-svg-icon>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="product-card-sm">
			<div *ngFor="let product of filteredProducts" class="product">
				<div class="product-image">
					<img [src]="product.imageUrl" [alt]="product.name" />
				</div>
				<div class="product-details-wrapper-sm">
					<div class="product-details">
						<span>{{ product.name }}</span>
						<span
							>{{ product.cost | currency : "INR" }} /
							{{ product.unit }}</span
						>
					</div>
					<div>
						<button (click)="openAdd(product)" class="cart-btn">
							<app-svg-icon [svgIconId]="'cart'"></app-svg-icon>
						</button>
					</div>
				</div>
			</div>

			<div class="add-to-cart">
				<div class="quantity-container">
					<div class="quantity-wrapper">
						<p>{{ item.name }}</p>
						<div class="quantity">
							<a href="#" (click)="removeQuantity($event, item)">
								<app-svg-icon
									[svgIconId]="'minus-sm'"
								></app-svg-icon>
							</a>
							<input
								id="quantity"
								name="quantity"
								type="text"
								aria-label="Quantity"
								[(ngModel)]="item.quantity"
							/>
							<a href="#" (click)="addQuantity($event, item)">
								<app-svg-icon
									[svgIconId]="'plus-sm'"
								></app-svg-icon>
							</a>
						</div>
					</div>

					<button class="btn-cart btn-add" (click)="addToCart(item)">
						ADD TO CART
					</button>
					<button class="btn-cart btn-cancel" (click)="cancelAdd()">
						CANCEL
					</button>
				</div>
			</div>
		</div>
	</div>
</div>
